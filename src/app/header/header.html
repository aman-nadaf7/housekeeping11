<div class="page">

<p-toolbar class="main_header_toolbar flex flex-wrap gap-0">
  <ng-template pTemplate="start">
    <i class="pi pi-arrow-left"></i>
    <span class="title">Unicorn Groups / Radiant Retreat  / </span>
    <span class="highlighted">  Task Management</span>
  </ng-template>
  
  <ng-template pTemplate="end">
    <img src="/header/aura-logo.png" height="28" width="82" class="mr-3" pTooltip="Aura AI" tooltipPosition="bottom" placeholder="Bottom" tooltipStyleClass="sans-serif">
    <img src="/header/chat2.png" height="28" width="82" class="mr-3">
    <p-toast class="mr-3"></p-toast>
    <i class="pi pi-bell mr-4" style="cursor: pointer" (click)="show()"></i>
    <img src="/header/lasticon.png" height="24" width="24">
  </ng-template>
</p-toolbar>



<div class="mid_header">

<div class="mid-header_logos flex align-items-center w-full px-4 gap-1 flex-shrink-0">
  <span class="property_overview flex-1">Property Overview</span>
        <div class="selectbtn flex-shrink-0">
    <p-selectbutton [options]="stateOptions" [(ngModel)]="value" optionLabel="label" optionValue="value" aria-labelledby="basic" />
</div>
          <div class="search-container flex-shrink-0">
  <p-iconfield iconPosition="left" class="perfect-search">
    <p-inputicon class="pi pi-search" />
    <input type="text" pInputText placeholder="Search" (input)="onSearch($event)" />
  </p-iconfield>
</div>
          <div class="prime-date flex-shrink-0">
          <p-datepicker [(ngModel)]="selectedDate"  dateFormat="dd MM yy" appendTo="body"/>
        </div>
        <img src="/header/filter.png" height="32" width="109" class="filter">
        <img src="/header/autoassign.png" height="32" width="143" class="autoassign">
        
    </div>
</div>
<div class="last-header">

  <div class="kpi-container">

    <!-- KPI CARD 1 -->

 <div class="page__legend-column">
  <div class="legend">
    <!-- PrimeNG Stacked Bar Chart -->
<div class="legend__chart-wrapper" style="position: relative;">
      <p-chart 
        type="bar" 
        [data]="legendChartData" 
        [options]="legendChartOptions"
        class="legend-chart">
      </p-chart>
      <!-- Percentage Labels Overlay -->
      <div class="legend__percentages">
        <span class="legend__percent-label" style="width: 20%; left: -2%;">20%</span>
        <span class="legend__percent-label" style="width: 14%; left: 16%;">14%</span>
        <span class="legend__percent-label" style="width: 52%; left: 28%;">52%</span>
        <span class="legend__percent-label" style="width: 10%; left: 78%">10%</span>
        <span class="legend__percent-label" style="width: 6%; left: 87%;">3%</span>
        <span class="legend__percent-label" style="width: 1%; left: 95%;">1%</span>
      </div>
    </div>
    
    <!-- Legend Labels -->
    <div class="legend__labels">
      <div class="legend__item">
        <span class="legend__color" style="background-color: #ff6b6b;"></span>
        Dirty
      </div>
      <div class="legend__item">
        <span class="legend__color" style="background-color: #ffbe3b;"></span>
        In Progress
      </div>
      <div class="legend__item">
        <span class="legend__color" style="background-color: #38bdf8;"></span>
        Inspect
      </div>
      <div class="legend__item">
        <span class="legend__color" style="background-color: #4ade80;"></span>
        Cleaned
      </div>
      <div class="legend__item">
        <span class="legend__color" style="background-color: #6366f1;"></span>
        Out of Service
      </div>
      <div class="legend__item">
        <span class="legend__color" style="background-color: #9ca3af;"></span>
        Out of Order
      </div>
    </div>
  </div>
</div>

    

    <div class="kpi-card-1">
      <div class="left">
      <div class="kpi-top">
        <span class="kpi-title">Occupancy</span>
      </div>

      <div class="kpi-value1">
        232 <span class="kpi-total">/ 290</span>
      </div>
    </div>

      <div class="kpi-circle">
                <div class="occupancy-progress-wrapper">
          <p-chart 
            type="doughnut" 
            [data]="chartData" 
            [options]="chartOptions"
            class="occupancy-chart">
          </p-chart>
          <span class="occupancy-text">{{ occupancyPercentage }}%</span>
        </div>

      </div>
    </div>

    <!-- KPI CARD 2 - ARRIVAL -->
  <p-card class="kpi-card-primeng">
    <div class="kpi-top">
      <span class="kpi-title">Arrival</span>
      <div class="kpi-icon"><img src="/header/arrival.png" height="40" width="40" class="image11"></div>
    </div>
    <div class="kpi-value2">42</div>
    <div class="kpi-meta positive"><span class="pos">+2.0% </span><span>From last week</span></div>
  </p-card>

  <!-- KPI CARD 3 - DEPARTURE -->
  <p-card class="kpi-card-primeng">
    <div class="kpi-top">
      <span class="kpi-title">Departure</span>
      <div class="kpi-icon"><img src="/header/departure.png" height="40" width="40" class="image2"></div>
    </div>
    <div class="kpi-value3">42</div>
    <div class="kpi-meta negative"><span class="neg">-2.1% </span><span>From last week</span></div>
  </p-card>

  <!-- KPI CARD 4 - GUEST REQUEST -->
  <p-card class="kpi-card-primeng">
    <div class="kpi-top">
      <span class="kpi-title">Guest Request</span>
      <div class="kpi-icon"><img src="/header/guestreq.png" height="40" width="40" class="image3"></div>
    </div>
    <div class="kpi-value4">42</div>
    <div class="kpi-meta positive"><span class="pos">4.5 min</span> <span>Avg. service time</span></div>
  </p-card>
</div>
</div>
<div class="floors-scroll">
    <app-floor></app-floor>
  </div>
</div>